@model Repository.ViewModel.MenuItemViewModel
<div class="modal-dialog modal-dialog-centered modal-xl" style="margin-top: 0px; margin-bottom: 0px;">
    <div class="modal-content">
        <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Edit Menu Item</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <form id="editMenuItemForm"
                enctype="multipart/form-data">
                <input type="hidden" id="id" name="id" value="@Model.Items.First().Itemid" />
                <div class="row">
                    <div class="row col-md-8">
                        @* Category *@
                        <div class="col-md-6 col-12">
                            <label for="Categoryid" class="form-label">Category</label>
                            <select class="form-select" id="Categoryid" name="Items[0].Categoryid" required>
                                <option value="">Select a Category</option>
                                @foreach (var category in Model.Categories)
                                {
                                    @if (category.Categoryid == Model.Items.First().CategoryId)
                                    {
                                        <option value="@category.Categoryid" selected>
                                            @category.Name
                                        </option>
                                    }
                                    else
                                    {
                                        <option value="@category.Categoryid">
                                            @category.Name
                                        </option>
                                    }
                                }
                            </select>
                        </div>

                        @* Name *@
                        <div class="col-md-6 col-12">
                            <label for="Name" class="form-label">Name</label>
                            <input type="text" class="form-control" id="Name" name="Items[0].Name"
                                value="@Model.Items.First().Name" required />
                        </div>

                        @* Item Type *@
                        <div class="col-md-3 mt-3 col-12">
                            <label for="ItemType" class="form-label">Item Type</label>
                            <select class="form-select" id="ItemType" name="Itemtype">
                                <option value="" selected>@Model.Items.First().Itemtype</option>
                                <option value="">Select a type</option>
                                <option value="Veg">Veg</option>
                                <option value="Non-Veg">Non-Veg</option>
                                <option value="Vegan">Vegan</option>
                            </select>
                        </div>


                        @* Rate *@
                        <div class="col-md-3 mt-3">
                            <label for="Rate" class="form-label">Rate</label>
                            <input type="number" class="form-control" id="Rate" name="Items[0].Rate"
                                value="@Model.Items.First().Rate" required />
                        </div>

                        @* Quantity *@
                        <div class="col-md-3 mt-3">
                            <label for="Quantity" class="form-label">Quantity</label>
                            <input type="number" class="form-control" id="Quantity" name="Items[0].Quantity"
                                value="@Model.Items.First().Quantity" required />
                        </div>

                        @* Unit *@
                        <div class="col-md-3 mt-3">
                            <label for="Unit" class="form-label">Unit</label>
                            <select class="form-select" id="Unit" name="Items[0].Unit">
                                @if (Model.Items.First().Unit == "Piece")
                                {
                                    <option value="Piece" selected>Piece</option>
                                    <option value="Gram">Gram</option>
                                    <option value="Liter">Liter</option>
                                }
                                else if (Model.Items.First().Unit == "Gram")
                                {
                                    <option value="Piece">Piece</option>
                                    <option value="Gram" selected>Gram</option>
                                    <option value="Liter">Liter</option>
                                }
                                else
                                {
                                    <option value="Piece">Piece</option>
                                    <option value="Gram">Gram</option>
                                    <option value="Liter" selected>Liter</option>
                                }
                            </select>
                        </div>

                        @* Availability Toggle *@
                        <div class="col-md-3 mt-3 d-flex text-center align-items-center justify-content-center">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="IsAvailable"
                                    name="Items[0].Isavailable" checked/>
                                <label class="form-check-label m-2" for="IsAvailable">Available</label>
                            </div>
                        </div>

                        @* Tax Percentage *@
                        <div class="col-md-3 mt-3">
                            <label for="TaxPercentage" class="form-label">Tax Percentage</label>
                            <input type="number" class="form-control" id="TaxPercentage" name="Items[0].Tax"
                                value="@Model.Items.First().Tax" />
                        </div>

                        @* Short Code *@
                        <div class="col-md-3 mt-3">
                            <label for="ShortCode" class="form-label">Short Code</label>
                            <input type="text" class="form-control" id="ShortCode" name="Items[0].ItemShortCode"
                                value="@Model.Items.First().ItemShortCode" />
                        </div>

                        @* Description *@
                        <div class="col-md-12 mt-3">
                            <label for="Description" class="form-label">Description</label>
                            <textarea class="form-control" id="Description"
                                name="Items[0].Description">@Model.Items.First().Description</textarea>
                        </div>

                        @* Upload Image *@
                        <div class="col-md-12 mt-3">
                            <label for="Image" class="form-label">Upload Image</label>
                            <div class="border p-3 text-center" style="border: 2px dashed #ccc;">
                                <input type="file" id="Image" name="Items[0].ItemPhoto" class="form-control d-none" />
                                <label for="Image" class="text-primary">Drag and Drop or Browse Files</label>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4" style="background-color: #fdf5e6;">
                        @* Modifier Groups *@
                        <div class="mt-3">
                            <label for="ModifierGroups" class="form-label">Modifier Groups</label>
                            <select class="form-select" id="myDropDown" name="ModifierGroups">
                                <option value="">Select Modifier Group(s)</option>
                                @foreach (var modifierGroup in Model.ModifierGroups)
                                {
                                    <option value="@modifierGroup.ModifierGroupId">
                                        @modifierGroup.modifierGroupName
                                    </option>
                                }
                            </select>
                        </div>
                        @* <div id="ModifierInItem">
                            @Html.Partial("_ModifierInItem", Model);
                        </div> *@
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                style="padding: 6px !important; border: 1px solid #0066a7; background: transparent; color: #0066a7;">Cancel</button>
            <button type="submit" class="btn btn-primary" 
                style="padding: 6px !important;">Save</button>
        </div>
    </div>
</div>


<script>
    $('#myDropDown').change(function () {

        /* Get the selected value of dropdownlist */
        var selectedID = $(this).val();

        /* Request the partial view with .get request. */
        $.get('/Menu/GetModifierPartialData/' + selectedID, function (data) {

            /* data is the pure html returned from action method, load it to your page */
            $('#ModifierInItem').html(data);
            /* little fade in effect */
            $('#partialPlaceHolder').fadeIn('fast');
        });
    });

    @* $('#ItemType').change(function () {
        
    });     *@
</script>